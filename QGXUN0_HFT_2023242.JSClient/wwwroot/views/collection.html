<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Collection View</title>
    <link rel="stylesheet" href="viewstyle.css" />
</head>
<body>
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Books</th>
                <th>Is it series?</th>
            </tr>
        </thead>
        <tbody id="items"></tbody>
    </table>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.1/signalr.js"></script>
    <script src="viewscript.js"></script>
    <script>
        const connections = ["CollectionCreate", "CollectionUpdate", "CollectionDelete", "CollectionBooksUpdate", "BookUpdate", "BookDelete"]

        const endpoint = "Collection"

        const rowformat = (item) =>
`
<tr>
    <td class="main">${item.CollectionName}</td>
    <td class="center">${item.Books.map(b => b.Title).join("</br>")}</td>
    <td class="center">${item.IsSeries != null ? item.IsSeries : ""}</td>
</tr>
`

        setupSignalR(connections, endpoint, rowformat);
    </script>
</body>
</html>